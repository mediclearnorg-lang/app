<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #0a0a0a; color: #fff; font-family: sans-serif; padding: 20px; text-align: center; }
        .card { background: #1a1a1a; padding: 20px; border-radius: 15px; border: 1px solid #333; margin-bottom: 20px; }
        .accent { color: #FFD700; font-weight: bold; }
        .btn { background: #FFD700; color: #000; border: none; padding: 15px; width: 100%; border-radius: 10px; font-weight: bold; margin-top: 10px; }
        .btn-outline { background: transparent; border: 1px solid #FFD700; color: #FFD700; }
        .info-row { display: flex; justify-content: space-between; margin: 10px 0; font-size: 14px; }
    </style>
</head>
<body>
    <h2>Mining Pips <span class="accent">AI</span></h2>
    
    <div class="card">
        <div class="info-row"><span>Wallet Balance:</span> <span class="accent" id="bal">$0.00</span></div>
        <div class="info-row"><span>Daily Rate:</span> <span id="daily">$0.00</span></div>
        <hr style="border: 0.5px solid #333;">
        <div style="font-size: 18px; margin: 10px 0;">You can buy <span class="accent" id="possible-days">0</span> days</div>
    </div>

    <div class="card">
        <h3>Fixed Plans</h3>
        <button class="btn" onclick="act('pay_30')">30 Days VIP (<span id="p30">$0</span>)</button>
        <button class="btn btn-outline" onclick="act('pay_14')">14 Days VIP (<span id="p14">$0</span>)</button>
    </div>

    <div class="card">
        <h3>Add Credit</h3>
        <button class="btn btn-outline" onclick="act('invoice_50')">Deposit $50 (Best Value)</button>
        <button class="btn btn-outline" id="exact-btn" onclick="depositCustom()">Charge for 30 Days</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        const params = new URLSearchParams(window.location.search);
        
        const balance = parseFloat(params.get('bal'));
        const daily = parseFloat(params.get('daily'));
        const p30 = params.get('p30');
        const p14 = params.get('p14');

        document.getElementById("bal").innerText = "$" + balance;
        document.getElementById("daily").innerText = "$" + daily;
        document.getElementById("p30").innerText = "$" + p30;
        document.getElementById("p14").innerText = "$" + p14;
        document.getElementById("possible-days").innerText = Math.floor(balance / daily);
        document.getElementById("exact-btn").innerText = `Charge $${(p30 - balance).toFixed(2)} for 30 Days`;

        function act(cmd) {
            tg.sendData(cmd);
            tg.close();
        }

        function depositCustom() {
            const needed = (p30 - balance).toFixed(2);
            tg.sendData("invoice_" + needed);
            tg.close();
        }
    </script>
</body>
</html>
